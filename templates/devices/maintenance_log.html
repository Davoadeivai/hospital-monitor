{% extends 'base/base.html' %}
{% block title %}Ø³Ø±ÙˆÛŒØ³ Ùˆ Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ{% endblock %}
{% block breadcrumb %}DEVICES / MAINTENANCE{% endblock %}
{% block content %}

<div class="page-header fade-up">
  <div class="page-title-group">
    <div class="page-eyebrow">DEVICES / MAINTENANCE LOG</div>
    <h1 class="page-title">Ù„Ø§Ú¯ Ø³Ø±ÙˆÛŒØ³ Ùˆ Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ</h1>
    <p class="page-subtitle">ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ú©Ø§Ù…Ù„ ØªØ¹Ù…ÛŒØ±Ø§Øª Ùˆ Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ÛŒ Ø¯ÙˆØ±Ù‡â€ŒØ§ÛŒ</p>
  </div>
  <a href="/admin/devices/maintenancelog/add/" class="btn btn-primary">
    <i class="fas fa-plus me-2"></i>Ø«Ø¨Øª Ø³Ø±ÙˆÛŒØ³ Ø¬Ø¯ÛŒØ¯
  </a>
</div>

<div class="panel fade-up stagger-1">
  <div class="panel-header">
    <div class="panel-title">ðŸ”§ ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ø³Ø±ÙˆÛŒØ³</div>
    <div class="panel-subtitle">MAINTENANCE HISTORY</div>
  </div>
  <div class="panel-body" style="padding:0">
    <table class="data-table">
      <thead>
        <tr>
          <th>Ø¯Ø³ØªÚ¯Ø§Ù‡</th><th>Ù†ÙˆØ¹ Ø³Ø±ÙˆÛŒØ³</th><th>ØªØ§Ø±ÛŒØ®</th>
          <th>ØªÚ©Ù†ÛŒØ³ÛŒÙ†</th><th>Ù‡Ø²ÛŒÙ†Ù‡ (Ø±ÛŒØ§Ù„)</th><th>Ø³Ø±ÙˆÛŒØ³ Ø¨Ø¹Ø¯ÛŒ</th><th>Ø´Ø±Ø­</th>
        </tr>
      </thead>
      <tbody>
      {% for log in logs %}
      <tr>
        <td>
          <div style="display:flex;align-items:center;gap:8px">
            <span>{% if log.device.device_type == 'autoclave' %}ðŸ”¬{% else %}ðŸ”¥{% endif %}</span>
            <span class="td-primary">{{ log.device.name }}</span>
          </div>
        </td>
        <td>
          <span class="badge {% if log.type == 'CM' %}badge-red{% elif log.type == 'PM' %}badge-green{% else %}badge-ghost{% endif %}">
            {{ log.get_type_display }}
          </span>
        </td>
        <td class="td-mono" style="font-size:11px;color:var(--text-tertiary)">{{ log.date }}</td>
        <td class="td-mono" style="font-size:12px">{{ log.technician|default:'â€”' }}</td>
        <td class="td-mono" style="color:var(--amber)">{{ log.cost|floatformat:0 }}</td>
        <td class="td-mono" style="font-size:11px;color:{% if log.next_due %}var(--plasma){% else %}var(--text-tertiary){% endif %}">
          {{ log.next_due|default:'â€”' }}
        </td>
        <td style="font-size:12px;color:var(--text-secondary);max-width:200px">{{ log.description|truncatechars:50 }}</td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="7" style="text-align:center;padding:60px;color:var(--text-tertiary)">
          <div style="font-size:32px;margin-bottom:12px">ðŸ”§</div>
          <div style="font-family:var(--font-mono);font-size:11px">Ù‡ÛŒÚ† Ø±Ú©ÙˆØ±Ø¯ Ø³Ø±ÙˆÛŒØ³ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡</div>
        </td>
      </tr>
      {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
