{% extends 'base/base.html' %}
{% block title %}Ù…Ø¯ÛŒØ±ÛŒØª Ø²Ø¨Ø§Ù„Ù‡{% endblock %}
{% block breadcrumb %}WASTE / MANAGEMENT{% endblock %}
{% block content %}

<div class="page-header fade-up">
  <div class="page-title-group">
    <div class="page-eyebrow">WASTE / MANAGEMENT</div>
    <h1 class="page-title">Ù…Ø¯ÛŒØ±ÛŒØª Ø²Ø¨Ø§Ù„Ù‡ Ø¨ÛŒÙ…Ø§Ø±Ø³ØªØ§Ù†ÛŒ</h1>
    <p class="page-subtitle">Ø¢Ù…Ø§Ø± Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø²Ø¨Ø§Ù„Ù‡ Ø¨Ù‡ ØªÙÚ©ÛŒÚ© Ù†ÙˆØ¹ Ùˆ Ø¯Ø³ØªÚ¯Ø§Ù‡</p>
  </div>
</div>

<div class="stat-grid fade-up stagger-1">
  <div class="stat-card accent-green">
    <div class="stat-header"><div class="stat-icon-wrap">â™»ï¸</div></div>
    <div class="stat-value">{{ total_waste_kg|floatformat:0|default:0 }}</div>
    <div class="stat-label">Ú©Ù„ Ø²Ø¨Ø§Ù„Ù‡ Ø§ÛŒÙ† Ù…Ø§Ù‡ (kg)</div>
  </div>
  <div class="stat-card accent-blue">
    <div class="stat-header"><div class="stat-icon-wrap">ğŸ¦ </div></div>
    <div class="stat-value">{{ infectious_kg|floatformat:0|default:0 }}</div>
    <div class="stat-label">Ø²Ø¨Ø§Ù„Ù‡ Ø¹ÙÙˆÙ†ÛŒ (kg)</div>
  </div>
  <div class="stat-card accent-fire">
    <div class="stat-header"><div class="stat-icon-wrap">ğŸ”ª</div></div>
    <div class="stat-value">{{ sharp_kg|floatformat:0|default:0 }}</div>
    <div class="stat-label">ØªÛŒØ² Ùˆ Ø¨Ø±Ù†Ø¯Ù‡ (kg)</div>
  </div>
  <div class="stat-card accent-amber">
    <div class="stat-header"><div class="stat-icon-wrap">ğŸ’Š</div></div>
    <div class="stat-value">{{ other_kg|floatformat:0|default:0 }}</div>
    <div class="stat-label">Ø³Ø§ÛŒØ± Ø§Ù†ÙˆØ§Ø¹ (kg)</div>
  </div>
</div>

<div class="panel mt-6 fade-up stagger-2">
  <div class="panel-header">
    <div class="panel-title">ğŸ“‹ Ù„ÛŒØ³Øª Ø³ÛŒÚ©Ù„â€ŒÙ‡Ø§ÛŒ Ø²Ø¨Ø§Ù„Ù‡</div>
    <div class="panel-subtitle">WASTE PROCESSING LOG</div>
  </div>
  <div class="panel-body" style="padding:0">
    <table class="data-table">
      <thead>
        <tr><th>Ø¯Ø³ØªÚ¯Ø§Ù‡</th><th>ØªØ§Ø±ÛŒØ®</th><th>Ù†ÙˆØ¹ Ø²Ø¨Ø§Ù„Ù‡</th><th>ÙˆØ²Ù† (kg)</th><th>Ù…Ø¯Øª (min)</th><th>Ø§Ù¾Ø±Ø§ØªÙˆØ±</th><th>ÙˆØ¶Ø¹ÛŒØª</th></tr>
      </thead>
      <tbody>
      {% for c in cycles %}
      <tr>
        <td><div class="flex items-center gap-2">
          <span>{% if c.device.device_type == 'autoclave' %}ğŸ”¬{% else %}ğŸ”¥{% endif %}</span>
          <span class="td-primary">{{ c.device.name }}</span>
        </div></td>
        <td class="td-mono" style="font-size:11px;color:var(--text-tertiary)">{{ c.start_time|date:"Y/m/d H:i" }}</td>
        <td>
          <span class="badge {% if c.waste_type == 'infectious' %}badge-red{% elif c.waste_type == 'sharp' %}badge-amber{% else %}badge-ghost{% endif %}">
            {{ c.get_waste_type_display }}
          </span>
        </td>
        <td class="td-mono td-accent">{{ c.waste_weight_kg }} kg</td>
        <td class="td-mono">{{ c.duration_minutes|default:'â€”' }}</td>
        <td class="td-mono" style="font-size:11px">{{ c.operator|default:'â€”' }}</td>
        <td><span class="badge {% if c.status == 'complete' %}badge-green{% elif c.status == 'error' %}badge-red{% else %}badge-ghost{% endif %}">{{ c.get_status_display }}</span></td>
      </tr>
      {% empty %}
      <tr><td colspan="7" style="text-align:center;padding:40px;color:var(--text-tertiary)">Ø³ÛŒÚ©Ù„ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯</td></tr>
      {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
