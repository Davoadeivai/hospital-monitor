{% extends 'base/base.html' %}
{% block title %}Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§{% endblock %}
{% block page_title %}Ù„ÛŒØ³Øª Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <div class="btn-group">
        <a href="{% url 'device_list' %}" class="btn {% if not device_type_filter %}btn-success{% else %}btn-outline-success{% endif %}">Ù‡Ù…Ù‡</a>
        <a href="?type=autoclave" class="btn {% if device_type_filter == 'autoclave' %}btn-success{% else %}btn-outline-success{% endif %}">ğŸ”¬ Ø§ØªÙˆÚ©Ù„Ø§ÙˆÙ‡Ø§</a>
        <a href="?type=incinerator" class="btn {% if device_type_filter == 'incinerator' %}btn-success{% else %}btn-outline-success{% endif %}">ğŸ”¥ Ø²Ø¨Ø§Ù„Ù‡â€ŒØ³ÙˆØ²Ù‡Ø§</a>
    </div>
    <a href="/admin/devices/device/add/" class="btn btn-primary">
        <i class="fas fa-plus"></i> Ø§ÙØ²ÙˆØ¯Ù† Ø¯Ø³ØªÚ¯Ø§Ù‡
    </a>
</div>

<div class="row g-3">
{% for device in devices %}
<div class="col-md-6 col-lg-4">
    <div class="device-card {{ device.status }}">
        <div class="d-flex justify-content-between align-items-start mb-3">
            <div>
                <div class="fw-600 fs-5">
                    {% if device.device_type == 'autoclave' %}ğŸ”¬{% else %}ğŸ”¥{% endif %}
                    {{ device.name }}
                </div>
                <small class="text-muted">{{ device.model_number }} | {{ device.serial_number }}</small>
            </div>
            <span class="status-badge status-{{ device.status }}">
                {% if device.status == 'online' %}<span class="pulse me-1"></span>{% endif %}
                {{ device.get_status_display }}
            </span>
        </div>

        <div class="row g-2 mb-3">
            <div class="col-6">
                <small class="text-muted">Ø¨Ø®Ø´</small>
                <div class="fw-500">{{ device.department|default:'-' }}</div>
            </div>
            <div class="col-6">
                <small class="text-muted">Ø¸Ø±ÙÛŒØª</small>
                <div class="fw-500">{{ device.capacity_kg }} kg</div>
            </div>
            <div class="col-6">
                <small class="text-muted">ØªÙˆØ§Ù† Ø¨Ø±Ù‚</small>
                <div class="fw-500">{{ device.power_kw }} kW</div>
            </div>
            <div class="col-6">
                <small class="text-muted">Ø³Ø±ÙˆÛŒØ³ Ø¨Ø¹Ø¯ÛŒ</small>
                <div class="fw-500 {% if device.maintenance_due %}text-danger{% endif %}">
                    {{ device.next_maintenance|default:'-' }}
                </div>
            </div>
        </div>

        <div class="d-flex gap-2">
            <a href="{% url 'device_monitor' device.pk %}" class="btn btn-sm btn-success flex-fill">
                <i class="fas fa-chart-line"></i> Ù…Ø§Ù†ÛŒØªÙˆØ±
            </a>
            <a href="/admin/devices/device/{{ device.pk }}/change/" class="btn btn-sm btn-outline-secondary">
                <i class="fas fa-edit"></i>
            </a>
        </div>
    </div>
</div>
{% empty %}
<div class="col-12 text-center py-5">
    <i class="fas fa-microchip fa-4x text-muted mb-3"></i>
    <h5 class="text-muted">Ù‡ÛŒÚ† Ø¯Ø³ØªÚ¯Ø§Ù‡ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡</h5>
    <a href="/admin/devices/device/add/" class="btn btn-primary mt-2">Ø§ÙØ²ÙˆØ¯Ù† Ø§ÙˆÙ„ÛŒÙ† Ø¯Ø³ØªÚ¯Ø§Ù‡</a>
</div>
{% endfor %}
</div>
{% endblock %}
